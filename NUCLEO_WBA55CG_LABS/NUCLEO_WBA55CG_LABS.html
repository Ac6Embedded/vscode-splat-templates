<!DOCTYPE html>

<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="assets/NUCLEO_WBA55CG.css" />
  <link rel="stylesheet" href="../common/assets/serial-ui.css" />
</head>

<body>
  <div id="app">
    <div class="logo-container">
      <svg class="logo-ac6" viewBox="0 0 176 82" width="88px" height="41px">
        <image xlink:href="../common/assets/logo_ac6.svg" />
      </svg>
    </div>

    <div class="refresh-button-container">
      <button id="refreshButton">
        <img src="../common/assets/refresh.png" alt="Refresh" />
      </button>
    </div>

    <div id="board" style="height: 80%">
      <svg class="board" version="1.1" viewBox="0 0 800 350" style="height: 100%; width: 100%; max-width: 800px;">
        <svg class="board-image" version="1.1" viewBox="0 0 539 350"
          style="height: 100%; width: 100%; max-width: 539px;">
          <!-- Image of the board -->
          <image xlink:href="assets/NUCLEO_WBA55CG.gif" y="0" x="0" preserveAspectRatio="xMidYMax" height="100%"
            width="100%" />

          <ellipse class="interactive user-button" style="opacity:1;fill-opacity:1;" id="Button--UserButton1" cx="174"
            cy="325" rx="5" ry="5"></ellipse>
          <ellipse class="interactive user-button" style="opacity:1;fill-opacity:1;" id="Button--UserButton2" cx="206"
            cy="325" rx="5" ry="5"></ellipse>
          <ellipse class="interactive user-button" style="opacity:1;fill-opacity:1;" id="Button--UserButton3" cx="238"
            cy="325" rx="5" ry="5"></ellipse>
          <ellipse class="interactive reset-button" style="opacity:1;fill-opacity:1;fill:red" id="Button--ResetButton"
            cx="280" cy="324" rx="5" ry="5"></ellipse>
        </svg>
        <svg class="io-shield" version="1.1" viewBox="-300 0 150 350"
          style="height: 100%; width: 100%; max-width: 150px;">
          <defs>
            <filter id="glow" x="-20%" y="-20%" width="250%" height="250%">
              <feGaussianBlur stdDeviation="6" result="coloredBlur" />
              <feMerge>
                <feMergeNode in="coloredBlur" />
                <feMergeNode in="SourceGraphic" />
              </feMerge>
            </filter>
          </defs>
          <svg width="40px" height="40px" x="0" y="0" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
            <g id="LED--LED1" class="interactive shadowed hidden" style="filter:url(#glow)">
              <path fill="#EE5555" stroke="none"
                d="M31.3882,26.7177c0,0,9.2367-1.8188,8.4221-9.1964c-1.3538-12.261-1.4678-10.4237-1.4678-10.4237 l-5.5293,1.0104C32.8133,8.1081,35.9998,21.7018,31.3882,26.7177z" />
              <path fill="#EE5555" stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="16.3353" y="40.7917" width="26.998" height="3.0833" fill="#EE5555" stroke="none" />
              <path fill="#EE1111" stroke="none"
                d="M34.5417,7.5625c0,0,15.3232,0.5495,15.9047,13.875c0.9664,22.1458,0.0665,18.9191,0.0665,18.9191 l-9.3254-0.19C41.1875,40.1667,42.6247,15.125,34.5417,7.5625z" />
              <rect x="43.3333" y="40.7917" width="11.8333" height="3.0833" fill="#EE1111" stroke="none" />
            </g>
            <g id="pins">
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            </g>
            <g id="line">
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M25.8125,19.0625" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M35.2497,7.0359c8.1462,0,14.75,7.496,14.75,16.7427v7.388" />
              <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"
                stroke-miterlimit="10" stroke-width="2"
                points="16,44.5 45.5309,44.5 45.9063,44.5 56,44.5 56,40.1667 45.9063,40.1667 45.4999,40.1667 16,40.1667" />
            </g>
          </svg>
          <g id="connection-led1">
            <line x1="20" y1="45" x2="20" y2="70" stroke="#EE1111" stroke-width="3" />
            <line x1="20" y1="70" x2="-30" y2="70" stroke="#EE1111" stroke-width="3" />
            <line x1="-30" y1="70" x2="-30" y2="220" stroke="#EE1111" stroke-width="3" />
            <line x1="-30" y1="220" x2="-95" y2="220" stroke="#EE1111" stroke-width="3" />
          </g>

          <svg width="40px" height="40px" x="0" y="80" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
            <g id="LED--LED2" class="interactive shadowed hidden" style="filter:url(#glow)">
              <path fill="#55EE55" stroke="none"
                d="M31.3882,26.7177c0,0,9.2367-1.8188,8.4221-9.1964c-1.3538-12.261-1.4678-10.4237-1.4678-10.4237 l-5.5293,1.0104C32.8133,8.1081,35.9998,21.7018,31.3882,26.7177z" />
              <path fill="#55EE55" stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="16.3353" y="40.7917" width="26.998" height="3.0833" fill="#55EE55" stroke="none" />
              <path fill="#11EE11" stroke="none"
                d="M34.5417,7.5625c0,0,15.3232,0.5495,15.9047,13.875c0.9664,22.1458,0.0665,18.9191,0.0665,18.9191 l-9.3254-0.19C41.1875,40.1667,42.6247,15.125,34.5417,7.5625z" />
              <rect x="43.3333" y="40.7917" width="11.8333" height="3.0833" fill="#11EE11" stroke="none" />
            </g>
            <g id="pins">
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            </g>
            <g id="line">
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M25.8125,19.0625" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M35.2497,7.0359c8.1462,0,14.75,7.496,14.75,16.7427v7.388" />
              <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"
                stroke-miterlimit="10" stroke-width="2"
                points="16,44.5 45.5309,44.5 45.9063,44.5 56,44.5 56,40.1667 45.9063,40.1667 45.4999,40.1667 16,40.1667" />
            </g>
          </svg>
          <g id="connection-led2">
            <line x1="20" y1="125" x2="20" y2="150" stroke="#11EE11" stroke-width="3" />
            <line x1="20" y1="150" x2="-20" y2="150" stroke="#11EE11" stroke-width="3" />
            <line x1="-20" y1="150" x2="-20" y2="245" stroke="#11EE11" stroke-width="3" />
            <line x1="-20" y1="245" x2="-95" y2="245" stroke="#11EE11" stroke-width="3" />
          </g>

          <svg width="40px" height="40px" x="0" y="160" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
            <g id="LED--LED3" class="interactive shadowed hidden" style="filter:url(#glow)">
              <path fill="#5555EE" stroke="none"
                d="M31.3882,26.7177c0,0,9.2367-1.8188,8.4221-9.1964c-1.3538-12.261-1.4678-10.4237-1.4678-10.4237 l-5.5293,1.0104C32.8133,8.1081,35.9998,21.7018,31.3882,26.7177z" />
              <path fill="#5555EE" stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="16.3353" y="40.7917" width="26.998" height="3.0833" fill="#5555EE" stroke="none" />
              <path fill="#1111DD" stroke="none"
                d="M34.5417,7.5625c0,0,15.3232,0.5495,15.9047,13.875c0.9664,22.1458,0.0665,18.9191,0.0665,18.9191 l-9.3254-0.19C41.1875,40.1667,42.6247,15.125,34.5417,7.5625z" />
              <rect x="43.3333" y="40.7917" width="11.8333" height="3.0833" fill="#1111DD" stroke="none" />
            </g>
            <g id="pins">
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            </g>
            <g id="line">
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M25.8125,19.0625" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M35.2497,7.0359c8.1462,0,14.75,7.496,14.75,16.7427v7.388" />
              <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"
                stroke-miterlimit="10" stroke-width="2"
                points="16,44.5 45.5309,44.5 45.9063,44.5 56,44.5 56,40.1667 45.9063,40.1667 45.4999,40.1667 16,40.1667" />
            </g>
          </svg>
          <g id="connection-led3">
            <line x1="20" y1="205" x2="20" y2="232" stroke="#1111DD" stroke-width="3" />
            <line x1="20" y1="232" x2="-95" y2="232" stroke="#1111DD" stroke-width="3" />
          </g>

          <svg width="40px" height="40px" x="0" y="240" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg">
            <g id="LED--LED4" class="interactive shadowed hidden" style="filter:url(#glow)">
              <path fill="#EECC55" stroke="none"
                d="M31.3882,26.7177c0,0,9.2367-1.8188,8.4221-9.1964c-1.3538-12.261-1.4678-10.4237-1.4678-10.4237 l-5.5293,1.0104C32.8133,8.1081,35.9998,21.7018,31.3882,26.7177z" />
              <path fill="#EECC55" stroke="none" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="16.3353" y="40.7917" width="26.998" height="3.0833" fill="#EECC55" stroke="none" />
              <path fill="#EEBB11" stroke="none"
                d="M34.5417,7.5625c0,0,15.3232,0.5495,15.9047,13.875c0.9664,22.1458,0.0665,18.9191,0.0665,18.9191 l-9.3254-0.19C41.1875,40.1667,42.6247,15.125,34.5417,7.5625z" />
              <rect x="43.3333" y="40.7917" width="11.8333" height="3.0833" fill="#EEBB11" stroke="none" />
            </g>
            <g id="pins">
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="#d0cfce" stroke="none" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
            </g>
            <g id="line">
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M34.5417,7.0359c-8.1462,0-14.75,7.496-14.75,16.7427v16.388h29.5" />
              <rect x="26.8333" y="44.5" width="4" height="22.095" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <rect x="41.3333" y="44.5" width="4" height="16.4792" fill="none" stroke="#000000" stroke-linecap="round"
                stroke-linejoin="round" stroke-miterlimit="10" stroke-width="2" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M25.8125,19.0625" />
              <path fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10"
                stroke-width="2" d="M35.2497,7.0359c8.1462,0,14.75,7.496,14.75,16.7427v7.388" />
              <polygon fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"
                stroke-miterlimit="10" stroke-width="2"
                points="16,44.5 45.5309,44.5 45.9063,44.5 56,44.5 56,40.1667 45.9063,40.1667 45.4999,40.1667 16,40.1667" />
            </g>
          </svg>
          <g id="connection-led4">
            <line x1="20" y1="287" x2="-20" y2="287" stroke="#EEBB11" stroke-width="3" />
            <line x1="-20" y1="287" x2="-20" y2="260" stroke="#EEBB11" stroke-width="3" />
            <line x1="-20" y1="260" x2="-95" y2="260" stroke="#EEBB11" stroke-width="3" />
          </g>

          <svg width="60px" height="60px" x="-10" y="295" xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 29.57917 23.229179" version="1.1">
            <defs id="defs5634">
              <radialGradient xlink:href="#linearGradient5586" id="radialGradient5588" cx="114.4323" cy="-41.005211"
                fx="114.4323" fy="-41.005211" r="5.9531226" gradientUnits="userSpaceOnUse"
                gradientTransform="translate(37.703132,109.14062)" />
              <linearGradient id="linearGradient5586">
                <stop style="stop-color:#161616;stop-opacity:0" offset="0" id="stop5582" />
                <stop id="stop5590" offset="0.89999998" style="stop-color:#3e3e3e;stop-opacity:0.79036146" />
                <stop style="stop-color:#010101;stop-opacity:1" offset="1" id="stop5584" />
              </linearGradient>
              <radialGradient xlink:href="#linearGradient5573" id="radialGradient5575" cx="114.4323" cy="-41.005211"
                fx="114.4323" fy="-41.005211" r="5.1593723" gradientUnits="userSpaceOnUse"
                gradientTransform="translate(37.703132,109.14062)" />
              <linearGradient id="linearGradient5573">
                <stop style="stop-color:#747474;stop-opacity:0.00481928" offset="0" id="stop5569" />
                <stop id="stop5577" offset="0.80000001" style="stop-color:#0c0c0c;stop-opacity:0.04096385" />
                <stop style="stop-color:#373737;stop-opacity:1" offset="1" id="stop5571" />
              </linearGradient>
            </defs>
            <g id="layer1" transform="translate(-0.32946,-1.1473106)">
              <g transform="translate(-137.01637,-54.050593)" id="g5632">
                <path
                  style="fill:#d3d3d3;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                  d="m 161.39583,62.314583 h -2.11666 V 62.05 c 0,-0.273602 0,-0.273602 -0.26984,-0.275865 l -1.58225,0.01128 v 2.116666 l 1.59786,-2.64e-4 c 0.25423,2.67e-4 0.25423,2.67e-4 0.25423,-0.24649 v -0.282412 h 2.11666 c 0.52917,0 0.52917,0 0.52917,-0.529167 0,-0.529167 0,-0.529167 -0.52917,-0.529167 z"
                  id="path5613" />
                <path id="path5615"
                  d="m 161.39583,70.252083 h -2.11666 V 69.9875 c 0,-0.273602 0,-0.273602 -0.26984,-0.275865 l -1.58225,0.01128 v 2.116666 l 1.59786,-2.64e-4 c 0.25423,2.67e-4 0.25423,2.67e-4 0.25423,-0.24649 v -0.282412 h 2.11666 c 0.52917,0 0.52917,0 0.52917,-0.529167 0,-0.529167 0,-0.529167 -0.52917,-0.529167 z"
                  style="fill:#d3d3d3;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
                <path id="rect5608"
                  d="m 142.875,62.314585 h 2.11666 v -0.264583 c 0,-0.273602 0,-0.273602 0.26984,-0.275865 l 1.58225,0.01128 v 2.116666 l -1.59786,-2.64e-4 c -0.25423,2.67e-4 -0.25423,2.67e-4 -0.25423,-0.24649 V 63.372917 H 142.875 c -0.52917,0 -0.52917,0 -0.52917,-0.529167 0,-0.529167 0,-0.529167 0.52917,-0.529167 z"
                  style="fill:#d3d3d3;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
                <path
                  style="fill:#d3d3d3;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                  d="m 142.875,70.252085 h 2.11666 v -0.264583 c 0,-0.273602 0,-0.273602 0.26984,-0.275865 l 1.58225,0.01128 v 2.116666 l -1.59786,-2.64e-4 c -0.25423,2.67e-4 -0.25423,2.67e-4 -0.25423,-0.24649 V 71.310417 H 142.875 c -0.52917,0 -0.52917,0 -0.52917,-0.529167 0,-0.529167 0,-0.529167 0.52917,-0.529167 z"
                  id="path5611" />
                <g transform="matrix(0.58823584,0,0,0.58823584,62.643896,26.732799)" id="g5606">
                  <rect
                    style="fill:#101010;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    id="rect5454" width="22.489584" height="22.489584" x="140.89064" y="56.890625" rx="0.5" ry="0.5" />
                  <rect ry="0.44117644" rx="0.44117659" y="58.213543" x="142.21355" height="19.84375" width="19.843756"
                    id="rect5456"
                    style="fill:#d3d3d3;fill-opacity:1;stroke:none;stroke-width:0.2334559;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" />
                  <circle
                    style="fill:#030303;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    id="path5458" cx="160.07292" cy="76.072914" r="0.66145831" />
                  <circle cy="76.072914" cx="144.19792" id="circle5475"
                    style="fill:#030303;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    r="0.66145831" />
                  <circle r="0.66145831"
                    style="fill:#030303;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    id="circle5477" cx="144.19792" cy="60.197918" />
                  <circle cy="60.197918" cx="160.07292" id="circle5479"
                    style="fill:#030303;fill-opacity:1;stroke:none;stroke-width:0.26458332;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    r="0.66145831" />
                  <circle cy="68.135414" cx="152.13542" id="circle5479-0"
                    style="fill:#030303;fill-opacity:1;stroke:none;stroke-width:2.91041756;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    r="7.2760444" />
                  <circle cy="68.135414" cx="152.13544" id="circle5479-0-2"
                    style="fill:url(#radialGradient5588);fill-opacity:1;stroke:none;stroke-width:2.38124895;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    r="5.9531226" />
                  <circle cy="68.135414" cx="152.13544" id="circle5479-0-2-3"
                    style="fill:#000000;fill-opacity:1;stroke:none;stroke-width:2.16958213;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    r="5.4239559" />
                  <path
                    style="fill:url(#radialGradient5575);fill-opacity:1;stroke:none;stroke-width:2.06374907;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1"
                    d="m 152.13542,62.976 a 5.1593723,5.1593723 0 0 0 -5.15938,5.159375 5.1593723,5.1593723 0 0 0 1.15962,3.254582 5.1593723,5.1593723 0 0 1 -0.63045,-2.460832 5.1593723,5.1593723 0 0 1 5.15938,-5.159375 5.1593723,5.1593723 0 0 1 3.99975,1.904794 5.1593723,5.1593723 0 0 0 -4.52892,-2.698544 z"
                    id="circle5479-0-2-3-7" />
                </g>
              </g>
            </g>
          </svg>
          <g id="connection-user-button">
            <line x1="20" y1="345" x2="-115" y2="345" stroke="#77B5FE" stroke-width="3" />
            <line x1="-115" y1="345" x2="-115" y2="90" stroke="#77B5FE" stroke-width="3" />
            <line  x1="-115" y1="90" x2="-95" y2="90" stroke="#77B5FE" stroke-width="3" />
          </g>

          <ellipse class="interactive user-button" style="opacity:1;fill-opacity:1;" id="Button--UserButton" cx="20"
            cy="325" rx="8" ry="8"></ellipse>
        </svg>
      </svg>
    </div>

    <div id="console-header-container">
      <div id="title-console">Serial</div>
      <button id="hide-serial-button">Hide</button>
      <button id="clear-message-button">Clear</button>
    </div>

    <div id="resizable-bar"></div>

    <div id="send-message-container">
      <input type="text" id="send-to-uart-content" placeholder="Enter message..." />
      <button id="send-message-button">Send</button>
    </div>

    <div id="uart">
      <div class="message-container" id="message-container">
        <pre id="uart-content"></pre>
      </div>
    </div>

    <div id="footer"></div>
  </div>

  <script src="../common/assets/serial.js"></script>
  <script>
    window.addEventListener("DOMContentLoaded", (event) => {
      console.log("DOM fully loaded and parsed");

      let interactive = document.getElementsByClassName("interactive");
      let els = {};
      let uartChars = [];
      let uartContent = document.getElementById("message-container");
      for (el of interactive) {
        let idSplit = el.id.split("--");
        el.objectType = idSplit[0];
        els[idSplit[1]] = el;
      }
      for (el of Object.values(els)) {
        //if (el.objectType == "LED") el.classList.add("hidden");
      }

      const urlParams = new URLSearchParams(window.location.search);
      const port = urlParams.get("internalPort") || 9001;

      let ws = new WebSocket(`ws://localhost:${port}/`);

      ws.onopen = function () {
        console.log("WebSocket connection opened");
      };

      ws.onmessage = function (e) {
        let split = e.data.split("|");
        let type = split[0];
        let name = split[1];
        let message = split[2];

        if (type == "LED") {
          let el = els[name];
          if (el == null) {
            return;
          }
          if (message == "True") {
            el.classList.remove("hidden");
          } else {
            el.classList.add("hidden");
          }
        } else if (type == "UART") {
          uartChars.push(message);
          uartContent.innerHTML = uartChars.join("");
          scrollToBottom();
        }
      };

      const clearButton = document.getElementById("clear-message-button");
      clearButton.addEventListener("click", function () {
        uartChars = []; // Clear the array holding the UART characters
        uartContent.innerHTML = uartChars.join("");
      });

      // Function to send a message when the button is pressed
      function sendPressMessage() {
        ws.send("PRESS_BUTTON");
      }

      // Function to send a message when the button is released
      function sendReleaseMessage() {
        ws.send("RELEASE_BUTTON");
      }


      function sendMessage() {
        const message = document.getElementById("send-to-uart-content").value;
        // Send each character one by one
        ws.send("RECEIVE_UART|\n");
        for (const char of message) {
          ws.send(`RECEIVE_UART|${char}`);
        }
        // Send carriage return character at the end
        ws.send("RECEIVE_UART|\r");
      }

      function sendResetPressMessage() {
        ws.send("RESET_BUTTON_PRESSED");
      }

      // Function to send a message when the Reset button is released
      function sendResetReleaseMessage() {
        ws.send("RESET_BUTTON_RELEASED");
      }

      // Adding event handlers to the Reset button
      let resetButton = document.getElementById("Button--ResetButton");
      resetButton.addEventListener("mousedown", sendResetPressMessage);
      resetButton.addEventListener("mouseup", sendResetReleaseMessage);

      // Adding event handlers to the button
      let button = document.getElementById("Button--UserButton");
      button.addEventListener("mousedown", sendPressMessage);
      button.addEventListener("mouseup", sendReleaseMessage);

      // Adding event handler for the send button
      document.getElementById("send-message-button").addEventListener("click", sendMessage);

      // Function to scroll the message container to the bottom
      function scrollToBottom() {
        uartContent.scrollTop = uartContent.scrollHeight;
      }
    });
  </script>
</body>

</html>
